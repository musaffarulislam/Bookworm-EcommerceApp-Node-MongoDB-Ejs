<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">



    <title>Bookworm | Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Get in touch with Bookworm, your go-to bookstore in Kannur, Kerala. Reach out for inquiries, support, or suggestions.">
    
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <!-- <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- ===============================================-->
    <!--    template   -->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="../template/assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../template/assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../template/assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="../template/assets/img/favicons/favicon-32x32.png">
    <link rel="manifest" href="../template/assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="../template/assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">



    <!-- ===============================================-->
    <!--   Template Stylesheets-->
    <!-- ===============================================-->
    <link href="template/assets/css/theme.css" rel="stylesheet" />

    <!-- ===============================================-->
    <!--    Nav Style  -->
    <!-- ===============================================-->
    <link rel="stylesheet" href="../nav/css/linearicons.css">
    <link rel="stylesheet" href="../nav/css/font-awesome.min.css">
    <link rel="stylesheet" href="../nav/css/themify-icons.css">
    <link rel="stylesheet" href="../nav/css/owl.carousel.css">
    <link rel="stylesheet" href="../nav/css/nice-select.css">
    <link rel="stylesheet" href="../nav/css/nouislider.min.css">
    <link rel="stylesheet" href="../nav/css/ion.rangeSlider.css" />
    <link rel="stylesheet" href="../nav/css/ion.rangeSlider.skinFlat.css" />
    <link rel="stylesheet" href="../nav/css/magnific-popup.css">
    <link rel="stylesheet" href="../nav/css/main.css">


    <!-- ===============================================-->
    <!--    Book details  -->
    <!-- ===============================================-->
    <link rel="icon" type="image/png" href="../bookdetails/images/icons/favicon.png" />
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/fonts/iconic/css/material-design-iconic-font.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/fonts/linearicons-v1.0.0/icon-font.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/css-hamburgers/hamburgers.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/animsition/css/animsition.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/select2/select2.min.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/slick/slick.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/MagnificPopup/magnific-popup.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/vendor/perfect-scrollbar/perfect-scrollbar.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/css/util.css">
    <link rel="stylesheet" type="text/css" href="../bookdetails/css/main.css">



    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
        integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">


    <style type="text/css">
        body {
            margin-top: 20px;
            background: #eee;
        }

        h3 {
            font-size: 16px;
        }

        hr {
            background-color: #000000;
        }

        .text-navy {
            color: #ffb30e;
        }

        .cart-product-imitation {
            text-align: center;
            /* padding-top: 30px; */
            /* height: 80px; */
            width: 80px;
            background-color: #f8f8f9;
        }

        .product-imitation.xl {
            padding: 120px 0;
        }

        .product-desc {
            padding: 20px;
            position: relative;
        }

        .ecommerce .tag-list {
            padding: 0;
        }

        .ecommerce .fa-star {
            color: #d1dade;
        }

        .ecommerce .fa-star.active {
            color: #f8ac59;
        }

        .ecommerce .note-editor {
            border: 1px solid #e7eaec;
        }

        table.shoping-cart-table {
            margin-bottom: 0;
        }

        table.shoping-cart-table tr td {
            border: none;
            text-align: right;
        }

        table.shoping-cart-table tr td.desc,
        table.shoping-cart-table tr td:first-child {
            text-align: left;
        }

        /* table.shoping-cart-table tr td:last-child {
            width: 80px;
        } */
        .ibox {
            clear: both;
            margin-bottom: 25px;
            margin-top: 0;
            padding: 0;
        }

        .ibox.collapsed .ibox-content {
            display: none;
        }

        .ibox:after,
        .ibox:before {
            display: table;
        }

        .ibox-title {
            -moz-border-bottom-colors: none;
            -moz-border-left-colors: none;
            -moz-border-right-colors: none;
            -moz-border-top-colors: none;
            background-color: #ffffff;
            border-color: #e7eaec;
            border-image: none;
            border-style: solid solid none;
            border-width: 3px 0 0;
            color: inherit;
            margin-bottom: 0;
            padding: 14px 15px 7px;
            min-height: 48px;
        }

        .ibox-content {
            background-color: #ffffff;
            color: inherit;
            padding: 5px 20px 5px 20px;
            border-color: #e7eaec;
            border-image: none;
            border-style: solid solid none;
            border-width: 1px 0;
        }

        .ibox-footer {
            color: inherit;
            border-top: 1px solid #e7eaec;
            font-size: 90%;
            background: #ffffff;
            padding: 10px 15px;
        }

        @media (min-width: 991px) {
            .cartText {
                display: none;
            }
        }

        @media (max-width: 991px) {
            .cartIcon {
                display: none;
            }
        }
    </style>

    <style>
        body {
            background-color: #eee;
        }

        .mt-100 {
            margin-top: 150px;
        }

        .card {
            margin-bottom: 30px;
            border: 0;
            -webkit-transition: all .3s ease;
            transition: all .3s ease;
            letter-spacing: .5px;
            border-radius: 8px;
            -webkit-box-shadow: 1px 5px 24px 0 rgba(68, 102, 242, .05);
            box-shadow: 1px 5px 24px 0 rgba(68, 102, 242, .05);
        }

        .card .card-header {
            background-color: #fff;
            border-bottom: none;
            padding: 24px;
            border-bottom: 1px solid #f6f7fb;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .card-header:first-child {
            border-radius: calc(.25rem - 1px) calc(.25rem - 1px) 0 0;
        }

        .card .card-body {
            padding: 30px;
            background-color: transparent;
        }

        .btn-primary,
        .btn-primary.disabled,
        .btn-primary:disabled {
            background-color: #4466f2 !important;
            border-color: #4466f2 !important;
        }
    </style>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css"
    integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">


    <style type="text/css">
    body {
        background: #f7f7ff;
        margin-top: 20px;
    }

    .card {
        position: relative;
        display: flex;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 0 solid transparent;
        border-radius: .25rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 6px 0 rgb(218 218 253 / 65%), 0 2px 6px 0 rgb(206 206 238 / 54%);
    }

    .me-2 {
        margin-right: .5rem !important;
    }

    a {
        text-decoration: none;
        color: black;
    }

    .nav-item .active{
        background-color: rgb(253, 165, 0);
        color: #fff;
        text-decoration: none;
    }

    .addressSelect{
        color: black;
        border: 1px solid transparent;
        border-radius: 0.5rem;
        /* border-top-right-radius: 0.25rem; */
        display: block;
        padding: 0.5rem 1rem;
    }
    </style>

</head>

<body style="font-size: 14px;">

    <!-- ============================================-->
    <!-- Navbar ============================-->
    <header class="header_area sticky-header">
        <div class="main_menu" style="background-color: #ffffff;">
            <nav class="navbar navbar-expand-lg navbar-light main_box">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <a class="navbar-brand logo_h" href="/"><img class="" src="../nav/img/logo3.png"
                            alt="Bookworm logo" style="width:160px"></a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse offset justify-content-end" id="navbarSupportedContent">
                        <ul class="nav navbar-nav menu_nav ml-auto">
                            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="/book">Book</a></li>
                            <li class="nav-item cartText"><a class="nav-link"
                                    href="/cart/<%= userDetails._id %>">Cart</a></li>
                            <li class="nav-item cartIcon"><a class="nav-link" href="/cart/<%= userDetails._id %>"><i
                                        class="fas fa-shopping-cart"></i>
                            <li class="nav-item submenu dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button"
                                    aria-haspopup="true" aria-expanded="false"><i
                                        class="fas fa-user-circle me-2"></i></a>
                                <ul class="dropdown-menu">
                                    <li class="nav-item"><a class="nav-link" href="/myProfile/<%= userDetails._id %>">
                                            <%= userDetails.username %>
                                        </a></li>
                                    <li class="nav-item"><a class="nav-link" href="/myOrder/<%= userDetails._id %>">My
                                            Orders</a></li>
                                    <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </header>
    <!-- Navbar ============================-->
    <!-- ============================================-->

    <div class="container mt-5 pt-5" style="background: rgb(239, 239, 239);">
        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div class="col-md-9">
                    <div class="ibox shadow rounded">
                        <div class="ibox-title shadow rounded">
                            <span class="pull-right">(<strong>
                                    <%= count %>
                                </strong>) items</span>
                            <h6>Checkout</h6>
                        </div>

                        <% carts.forEach((cart)=>{ %>
                            <div class="ibox-content shadow rounded">
                                <div class="table-responsive">
                                    <table class="table shoping-cart-table">
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="cart-product-imitation">
                                                        <img src="../<%= cart?.product?.image1 %>" alt="" width="90">
                                                    </div>
                                                </td>
                                                <td class="desc">
                                                    <h4 class="w-bold">
                                                        <a href="/book-details/<%= cart?.product?._id %>"
                                                            class="text-navy">
                                                            <%= cart?.product?.bookName %>
                                                        </a>
                                                    </h4>
                                                    <dl class=" m-b-none">
                                                        <dt>
                                                            <%= cart?.product?.author?.authorName %>
                                                        </dt>
                                                        <dd>
                                                            <%= cart?.product?.genre?.genreName %> | <%=
                                                                    cart?.product?.language %>
                                                        </dd>
                                                    </dl>
                                                </td>
                                                <td>
                                                    Quantity : <%= cart.quantity %>
                                                </td>
                                                <td>
                                                    <h4>
                                                        ₹ <%= cart?.product?.retailPrice * cart.quantity %>
                                                    </h4>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        <% }) %>
                        <div class="ibox-content shadow rounded">
                            <a href="/cart/<%= userDetails._id %>"><button class="btn btn-white btn-sm my-3">
                                <i class="fa fa-arrow-left"></i> Go To Cart</button>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="ibox shadow rounded">
                        <div class="ibox-title shadow rounded">
                            <h5>Select Address</h5>
                        </div>
                        <div class="ibox-content text-center">
                            <div class="tab01">
                                <!-- Nav tabs -->
                                <div class="d-flex justify-content-center">
                                    <ul class="nav nav-tabs shadow" role="tablist">
                                        <li class="nav-item p-b-10 mt-3 addressTab" data-target="#Permanent">
                                            <a class="addressSelect active border" data-toggle="tab" href="#" role="tab"
                                                <% if (userDetails.address[0].address) { %>
                                                    onclick="permanentAddress('<%= userDetails.address[0].houseName %>', '<%= userDetails.address[0].streetName %>', '<%= userDetails.address[0].town %>', '<%= userDetails.address[0].state %>', 
                                                    '<%= userDetails.address[0].country %>','<%= userDetails.address[0].zipCode %>')"
                                                <%} %>
                                            >Permanent Address</a>
                                        </li>
                                        <li class="nav-item p-b-10 addressTab" data-target="#additionalAddress">
                                            <a class="addressSelect border" data-toggle="tab" href="#" role="tab">Other Address</a>
                                        </li>
                                    </ul>
                                </div>
                                <!-- Tab panes -->
                                <div class="tab-content">
                                    <% if (userDetails.address[0].address) { %>
                                    <div class="tab-pane fade show active" id="Permanent" role="tabpanel">
                                        <div class="p-lr-15-md">
                                        
                                        <div class="text-secondary my-3">
                                                <input type="button" class="btn btn-danger" value="Change Permanent Address" data-toggle="modal" data-target="#changeParmenantAddress">
                                        </div>


                                        <!-- ============================================-->
                                        <!-- Change Permenant Address ============================-->

                                        <div class="modal fade" id="changeParmenantAddress" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                              <div class="modal-content">
                                                <form id="changeParmenantAddressForm" action="/checkOutAddress/<%= userDetails._id %>" method="post" onsubmit="return submitformEditParmanent(event)">
                                                  <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLongTitle">Change Parmenant Address</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                    </button>
                                                  </div>
                                                  <div class="modal-body">
                                                    <div class="form-outline mb-1">
                                                      <div id="permanentAddressError"></div>
                                                      <label class="form-label" for="addHouseName">House No / Name</label>
                                                      <input type="text" name="houseName" id="houseName" class="form-control" value="<%= userDetails.address[0].houseName %>" required>
                                                      <label class="form-label" for="addStreetName">Street Name</label>
                                                      <input type="text" name="streetName" id="streetName" class="form-control" value="<%= userDetails.address[0].streetName %>" required>
                                                      <label class="form-label" for="addTown">Town</label>
                                                      <input type="text" name="town" id="town" class="form-control" value="<%= userDetails.address[0].town %>" required>
                                                      <label class="form-label" for="addState">State</label>
                                                      <input type="text" name="state" id="state" class="form-control" value="<%= userDetails.address[0].state %>" required>
                                                      <label class="form-label" for="addCountry">Country</label>
                                                      <input type="text" name="country" id="country" class="form-control" value="<%= userDetails.address[0].country %>" required>
                                                      <label class="form-label" for="addZipCode">Pin Code</label>
                                                      <input type="number" name="zipCode" id="zipCode" class="form-control" value="<%= userDetails.address[0].zipCode %>" required>
                                                    </div>
                                                  </div>
                                                  <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary">Change</button>
                                                  </div>
                                                </form>
                                              </div>
                                            </div>
                                        </div>
                                        <!-- Change Permenant Address ============================-->
                                        <!-- ============================================-->

                                        </div>

                                    </div>
            
                                    <!-- - -->
                                    <div class="tab-pane fade" id="additionalAddress" role="tabpanel">

                                        <% if (userDetails.address.length > 1) { %>

                                            <div class="btn-group d-flex justify-content-center mx-5 my-3">
                                                
                                                <select id="address-select" onchange="showAddressDetails()">
                                                    <option value="select">Select Address</option>
                                                    <% for (let i = 1; i < userDetails.address.length; i++) { %>
                                                      <option value="<%= userDetails.address[i]._id %>"><%= userDetails.address[i].houseName %></option>
                                                    <% } %>
                                                </select>
                                            </div>


                                            <div class="how-pos2 p-lr-15-md">
                                                <form id="seleteAddress" style="display: none;" method="POST">
                                                    <div id="otherAddressMessage"></div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="houseName">House No / Name</label>
                                                        <input type="text" name="selectHouseName" id="selectHouseName" class="form-control" value="<%= userDetails.address[0].houseName %>" required>
                                                    </div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="streetName">Street Name</label>
                                                        <input type="text" name="selectStreetName" id="selectStreetName" class="form-control" value="<%= userDetails.address[0].streetName %>" required>
                                                    </div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="town">Town</label>
                                                        <input type="text" name="selectTown" id="selectTown" class="form-control" value="<%= userDetails.address[0].town %>" required>
                                                    </div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="state">State</label>
                                                        <input type="text" name="selectState" id="selectState" class="form-control" value="<%= userDetails.address[0].state %>" required>
                                                    </div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="zipCode">Pin Code</label>
                                                        <input type="number" name="selectZipCode" id="selectZipCode" class="form-control" value="<%= userDetails.address[0].zipCode %>" required>
                                                    </div>
                                                    <div class="row mb-1">
                                                        <label class="form-label" for="country">Country</label>
                                                        <input type="text" name="selectCountry" id="selectCountry" class="form-control" value="<%= userDetails.address[0].country %>" required>
                                                    </div>
                                                    <div class="row mt-2">
                                                        <div class="col-sm-3" style="box-sizing: content-box;">
                                                            <div class="col-sm-9 text-secondary mb-2">
                                                                <input type="button" class="btn btn-primary" value="Save Changes" onclick="return checkOutUpdateAddress()">
                                                            </div>
                                                            <div class="col-sm-9 text-secondary">
                                                                <input type="button" class="btn btn-danger" value="Add Address" data-toggle="modal" data-target="#addOtherAddressModal">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div id="addAddress" class="text-secondary my-1" style="display: flex; justify-content: center;">
                                                <input type="submit" class="btn btn-danger px-4" value="Add Address" data-toggle="modal" data-target="#addOtherAddressModal">
                                            </div>
                                        <% }else{ %>
                                            <div id="addAddress" class="text-secondary my-2">
                                                <input type="submit" class="btn btn-danger px-4" value="Add Address" data-toggle="modal" data-target="#addOtherAddressModal">
                                            </div>
                                        <% } %>


                                        <!-- ============================================-->
                                        <!-- Add Other Address ============================-->

                                        <div class="modal fade" id="addOtherAddressModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                              <div class="modal-content">
                                                <form id="addOtherAddress" action="/checkoutAddOtherAddress/<%= userDetails._id %>" method="post" onsubmit="return submitformaddOtherAddress()">
                                                  <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLongTitle">Add Address</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                    </button>
                                                  </div>
                                                  <div class="modal-body">
                                                    <div class="form-outline mb-1">
                                                      <div id="addOtherAddressError"></div>
                                                      <label class="form-label" for="addHouseName">House No / Name</label>
                                                      <input type="text" id="addHouseName" class="form-control form-control-lg" name="addHouseName" required/>
                                                      <label class="form-label" for="addStreetName">Street Name</label>
                                                      <input type="text" id="addStreetName" class="form-control form-control-lg" name="addStreetName" required/>
                                                      <label class="form-label" for="addTown">Town</label>
                                                      <input type="text" id="addTown" class="form-control form-control-lg" name="addTown" required/>
                                                      <label class="form-label" for="addState">State</label>
                                                      <input type="text" id="addState" class="form-control form-control-lg" name="addState" required/>
                                                      <label class="form-label" for="addCountry">Country</label>
                                                      <input type="text" id="addCountry" class="form-control form-control-lg" name="addCountry" required/>
                                                      <label class="form-label" for="addZipCode">Pin Code</label>
                                                      <input type="number" id="addZipCode" class="form-control form-control-lg" name="addZipCode" required/>
                                                    </div>
                                                  </div>
                                                  <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary">Add</button>
                                                  </div>
                                                </form>
                                              </div>
                                            </div>
                                          </div>

                                        <!-- Add Other Address ============================-->
                                        <!-- ============================================-->
                                    </div>
                                    <% }else{ %>
                                        <div id="addAddress" class="text-secondary my-2">
                                            <input type="submit" class="btn btn-danger px-4" value="Add Address" data-toggle="modal" data-target="#addAddressModal">
                                        </div>
                                    <% } %>



                                        <!-- ============================================-->
                                        <!-- Add Permenant Address ============================-->

                                        <div class="modal fade" id="addAddressModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered" role="document">
                                              <div class="modal-content">
                                                <form id="addPermanantAddress" action="/checkOutAddress/<%= userDetails._id %>" method="post"  onsubmit="return submitformaddPermanentAddress()">
                                                  <div class="modal-header">
                                                    <h5 class="modal-title" id="exampleModalLongTitle">Add Address</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                      <span aria-hidden="true">&times;</span>
                                                    </button>
                                                  </div>
                                                  <div class="modal-body">
                                                    <div class="form-outline mb-1">
                                                    <div id="addPermanantAddressError"></div>
                                                      <label class="form-label" for="houseName">House No / Name</label>
                                                      <input type="text" id="addPermanantHouseName" class="form-control form-control-lg" name="houseName" required/>
                                                      <label class="form-label" for="streetName">Street Name</label>
                                                      <input type="text" id="addPermanantStreetName" class="form-control form-control-lg" name="streetName" required/>
                                                      <label class="form-label" for="town">Town</label>
                                                      <input type="text" id="addPermanantTown" class="form-control form-control-lg" name="town" required/>
                                                      <label class="form-label" for="state">State</label>
                                                      <input type="text" id="addPermanantState" class="form-control form-control-lg" name="state" required/>
                                                      <label class="form-label" for="country">Country</label>
                                                      <input type="text" id="addPermanantCountry" class="form-control form-control-lg" name="country" required/>
                                                      <label class="form-label" for="zipCode">Pin Code</label>
                                                      <input type="number" id="addPermanantZipCode" class="form-control form-control-lg" name="zipCode" required/>
                                                    </div>
                                                  </div>
                                                  <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary">Add</button>
                                                  </div>
                                                </form>
                                              </div>
                                            </div>
                                          </div>

                                        <!-- Add Permanent Address ============================-->
                                        <!-- ============================================-->
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="ibox shadow rounded">
                        <div class="ibox-title shadow rounded">
                            <h5>Address</h5>
                        </div>
                        <div class="ibox-content text-center">
                            <div class="my-2">
                                <% if (userDetails.address[0].address) { %>
                                <div id="orderAddress"><%= userDetails.address[0].houseName %>, <%= userDetails.address[0].streetName %>, <%= userDetails.address[0].town %>, <%= userDetails.address[0].state %>, 
                                                <%= userDetails.address[0].country %>, <%= userDetails.address[0].zipCode %></div>
                                <% }else{ %>
                                    <div id="orderAddress">Please Add Address</div>
                                    <div id="addAddress" class="text-secondary my-2">
                                            <input type="submit" class="btn btn-danger px-4" value="Add Address" data-toggle="modal" data-target="#addAddressModal">
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>

                    <div class="ibox shadow rounded">
                        <div class="ibox-title shadow rounded">
                            <h6>Bill</h6>
                        </div>
                        <div class="ibox-content shadow rounded py-2">
                            <% carts.forEach((cart)=>{ %>
                                <span class="d-flex">
                                    <div class="font-bold">
                                        <%= cart?.product?.bookName %> :
                                    </div><b>
                                        <div id="productPriceAndQuantity2<%=cart.product._id %>"
                                            style="color: #686868;"> ₹ <%= cart?.product?.retailPrice * cart.quantity %>
                                        </div>
                                    </b> <br>
                                </span>
                            <% }) %>
                                    <hr>
                                    <b>
                                        <div id="discount"></div>
                                    </b>
                                    <b>
                                        <% if (shipping) { %>
                                            <span id="shippingFee" class="text-danger">
                                                Shipping Fee : ₹ 40
                                            </span>
                                        <% }else{ %>
                                            <span id="shippingFee" class="text-danger">
                                                Shipping Fee : Free
                                            </span>
                                        <% } %>
                                    </b>
                                    <hr>

                                    <div class="d-flex">
                                        <span>
                                            Total :
                                        </span>
                                        <h4 class="font-bold ms-2 d-flex" style="font-weight:700;">
                                            ₹ <div id="totalAmount">
                                                <%= totalAmount %>
                                            </div>
                                        </h4>
                                    </div>
                                    <hr>
                                    <span class="text-muted mb-4">
                                        *If the total amount is more than <b class="text-dark"> ₹ 400 </b> rupees, there
                                        will be no shipping charge
                                    </span>
                                    <div id="couponMessage" class="mt-2"></div>
                                    <div id="couponInputBox" class="input-group my-3">
                                        <input type="text" id="couponName" class="form-control text-uppercase rounded"
                                            placeholder="Coupon name" aria-label="Recipient's username"
                                            aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                            <button class="btn btn-warning" type="button"
                                                onclick="applyCoupon('<%= userDetails._id %>')">Apply</button>
                                        </div>
                                    </div>
                        </div>
                    </div>


                    <div class="ibox shadow rounded">
                        <div class="ibox-title shadow rounded">
                            <h5>Payment Method</h5>
                        </div>
                        <div class="ibox-content text-center">
                            <div class="my-2">
                                <div id="paymentMessage"></div>
                                <button class="btn btn-primary btn-sm btn-block my-2"
                                    onclick="cashOnDelivary('<%= userDetails._id %>')">Chash On delivary</button>
                                <button class="btn btn-danger btn-sm btn-block my-2" id="rzp-button1">Online
                                    Payment</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>



    <script src="../javascripts/checkoutAddOtherAddressvalidation.js"></script>
    <script src="../javascripts/checkoutPermanentaChangeAddressValidation.js"></script>
    <script src="../javascripts/checkoutAddPermanentAddressvalidation.js"></script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
   
    <script>
        $(document).ready(function() {
            $('.addressTab').on('click', function(e) {
                e.preventDefault();
                var target = $(this).data('target');
                $('.tab-pane').removeClass('show active');
                $(target).addClass('show active');
            });
        });
    </script>

    <script>
        function permanentAddress(houseName,streetName,town,state,country,zipCode){
            document.getElementById('orderAddress').innerHTML = `${houseName}, ${streetName}, ${town}, ${state}, ${country}, ${zipCode}`
        }
    </script>

    <script>
        function showAddressDetails(){
            const url = window.location.origin;
            const addressId = document.getElementById('address-select').value;
            if(addressId === "select"){
                document.getElementById('seleteAddress').style.display = "none"
                document.getElementById('addAddress').style.display = "flex"
            }else{
                document.getElementById('seleteAddress').style.display = "block"
                document.getElementById('addAddress').style.display = "none"
            }
            console.log(url);
            fetch(`${url}/selectAddress`, {
                method: 'POST',
                headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    addressId
                })
            }).then((response)=>response.json())
            .then((data)=>{
                document.getElementById('orderAddress').innerHTML = `${data.address.houseName}, ${data.address.streetName}, ${data.address.town}, ${data.address.state}, ${data.address.country}, ${data.address.zipCode}`
                document.getElementById('selectHouseName').value = data.address.houseName
                document.getElementById('selectStreetName').value = data.address.streetName
                document.getElementById('selectTown').value = data.address.town
                document.getElementById('selectState').value = data.address.state
                document.getElementById('selectZipCode').value = data.address.zipCode
                document.getElementById('selectCountry').value = data.address.country
            })
        }

        function checkOutUpdateAddress(){
            const url = window.location.origin;
            const addressId = document.getElementById('address-select').value;
            const houseName = document.getElementById('selectHouseName').value
            const streetName = document.getElementById('selectStreetName').value
            const town = document.getElementById('selectTown').value
            const state = document.getElementById('selectState').value
            const zipCode = document.getElementById('selectZipCode').value
            const country = document.getElementById('selectCountry').value
            const selectErrorElement = document.querySelector('#otherAddressMessage');

            function hideErrorMessageother(){
                selectErrorElement.innerHTML="";
            }
            function showErrorMessageother(message){
                selectErrorElement.innerHTML =`<div class="alert alert-warning border border-warning d-flex justify-content-center fw-bold py-2" role="alert" >${message}</div>`;
                setTimeout(()=>{
                    selectErrorElement.innerHTML =`<div></div>`
                },5000);
            }

            if(houseName === "" || houseName.trim()==""){
                showErrorMessageother("House Name is required");
                return false;
            }
            if(houseName.length >40){
                showErrorMessageother("Name must be less than 40");
                return false;
            }
            if(streetName === "" || streetName.trim()==""){
                showErrorMessageother("Street Name is required");
                return false;
            }
            if(streetName.length >30){
                showErrorMessageother("Street Name must be less than 30");
                return false;
            }
            if(town === "" || town.trim()==""){
                showErrorMessageother("Town is required");
                return false;
            }
            if(town.length >30){
                showErrorMessageother("Town must be less than 30");
                return false;
            }
            if(state === "" || state.trim()==""){
                showErrorMessageother("State is required");
                return false;
            }
            if(state.length >30){
                showErrorMessageother("State must be less than 30");
                return false;
            }
            if(country === "" || country.trim()==""){
                showErrorMessageother("Country is required");
                return false;
            }
            if(country.length >30){
                showErrorMessageother("Country must be less than 30");
                return false;
            }
            if(zipCode === "" || zipCode.trim()==""){
                showErrorMessageother("Pin Code is required");
                return false;
            }
            if(zipCode.length <6 || zipCode.length >6 || selectZipCode.value <= 099999){
                showErrorMessageother("Incorrect Pin Code");
                return false;
            }
            hideErrorMessageother()

            console.log(url);
            fetch(`${url}/checkOutUpdateAddress/${addressId}`, {
                method: 'POST',
                headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    houseName,
                    streetName,
                    town,
                    state,
                    country,
                    zipCode
                })
            }).then((response)=>response.json())
            .then((data)=>{
                document.getElementById('orderAddress').innerHTML = `${houseName}, ${streetName}, ${town}, ${state}, ${country}, ${zipCode}`
            })
        }

    </script>  
   


   
   <script>
        let couponApply = false

        function cashOnDelivary(userId) {
            let couponName = false
            const ordertotalAmount = document.getElementById('totalAmount').innerText;
            const orderAddress = document.getElementById('orderAddress').innerText;
            if(orderAddress == "Please Add Address"){
                document.getElementById('paymentMessage').innerHTML = 
                        `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Address Not Found</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
            setTimeout(() => {
                document.getElementById('paymentMessage').innerHTML = ""
            }, 3000);
                return false
            }
            if(couponApply){
                couponName =  document.getElementById('couponName').value;
            }
            const url = window.location.origin;
            console.log(url);
            fetch(`${url}/cashOnDelivary?userId=${userId}`, {
                method: 'PUT',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    address: orderAddress,
                    totalAmount: ordertotalAmount,
                    couponName
                })
            })
            .then((response) => {
                if (response.status === 200) {
                    return response.json().then((data) => {
                        swal({
                            title: "Order Placed Successfully!",
                            text: `Your order has been placed successfully! Your order id is ${data.orderId}`,
                            icon: "success",
                            button: "Okay",
                        })
                            .then(() => {
                                window.location.href = `/myOrder/${userId}`;
                            });
                        setTimeout(() => {
                            window.location.href = `/myOrder/${userId}`;
                        }, 3000);
                    })
                }else if (response.status === 400){
                    return response.json().then((data) => {
                        couponApply = false
                        document.getElementById('paymentMessage').innerHTML = 
                        `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>${data.message}</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
                        setTimeout(() => {
                            document.getElementById('paymentMessage').innerHTML = ""
                        }, 3000);

                        if(data.shipping){
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ 40"
                        }else{
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ Free"
                        }

                        document.getElementById('totalAmount').innerText = data.totalAmount
                        document.getElementById('discountAmount').style.display = "none"
                        
                        document.getElementById('couponInputBox').innerHTML=
                                                    `<input type="text" id="couponName" class="form-control text-uppercase rounded"
                                                        placeholder="Coupon name" aria-label="Recipient's username"
                                                        aria-describedby="basic-addon2">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-warning" type="button"
                                                        onclick="applyCoupon('${userId}')">Apply</button>
                                                    </div>`
                        document.getElementById('couponMessage').innerHTML = ""
                    })
                }
            })
                .catch((error) => {
                    console.error(`There was a problem with the fetch operation: ${error.message}`);
                    // Show error modal
                    swal({
                        title: "Error",
                        text: "There was an error placing your order. Please try again later.",
                        icon: "error",
                        button: "Okay",
                    });
                });
        }

        document.getElementById("rzp-button1").addEventListener("click", async function (e) {
            e.preventDefault();
            const userId = "<%= userDetails._id %>";
            const orderTotalAmount = document.getElementById("totalAmount").innerText;
            const orderAddress = document.getElementById("orderAddress").innerText;

            if(orderAddress == "Please Add Address"){
                document.getElementById('paymentMessage').innerHTML = 
                        `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Address Not Found</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
                setTimeout(() => {
                    document.getElementById('paymentMessage').innerHTML = ""
                }, 3000);
                return false
            }
            let couponName = false
            if(couponApply){
                couponName =  document.getElementById('couponName').value;
            }

            const url = window.location.origin;
            console.log(url);
            try {
                let response = await fetch(`${url}/onlinePayment?userId=${userId}`, {
                    method: "PUT",
                    headers: {
                        Accept: "application/json",
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        address: orderAddress,
                        totalAmount: orderTotalAmount,
                        couponName
                    })
                });

                if (response.status === 400){
                    return response.json().then((data) => {
                        couponApply = false
                        document.getElementById('paymentMessage').innerHTML = 
                        `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>${data.message}</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`;
                        setTimeout(() => {
                            document.getElementById('paymentMessage').innerHTML = ""
                        }, 3000);

                        if(data.shipping){
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ 40"
                        }else{
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ Free"
                        }

                        document.getElementById('totalAmount').innerText = data.totalAmount
                        document.getElementById('discountAmount').style.display = "none"
                        
                        document.getElementById('couponInputBox').innerHTML=
                                                    `<input type="text" id="couponName" class="form-control text-uppercase rounded"
                                                        placeholder="Coupon name" aria-label="Recipient's username"
                                                        aria-describedby="basic-addon2">
                                                    <div class="input-group-append">
                                                        <button class="btn btn-warning" type="button"
                                                        onclick="applyCoupon('${userId}')">Apply</button>
                                                    </div>`
                        document.getElementById('couponMessage').innerHTML = ""
                    })
                }

                let orderData = await response.json();
                var options = {
                    key: "rzp_test_MfMHXbdBnx5BYx",
                    amount: orderTotalAmount * 100,
                    currency: "INR",
                    name: "Bookworm",
                    description: "Test Transaction",
                    image: "../adminLogin/images/img-02.png",
                    order_id: orderData.options.id,
                    handler: function (response) {
                        storeOrderData(response, orderData.options, orderData.userDetails._id, orderAddress, orderData.couponName);
                    },
                    prefill: {
                        name: orderData.userDetails.username,
                        email: orderData.userDetails.email,
                        contact: orderData.userDetails.phoneNumber
                    },
                    theme: {
                        color: "#ffb30e"
                    }
                };
                var rzp1 = new Razorpay(options);
                rzp1.open();
            } catch (error) {
                console.error("Error fetching order data:", error);
            }
        });
        function storeOrderData(payment, order, userId, address, couponName) {
            const url = window.location.origin;
            console.log(url);
            fetch(`${url}/verifyOnlinePayment`, {
                method: 'PUT',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    payment,
                    order,
                    userId,
                    address,
                    couponName
                })
            }).then((response) => {
                if (response.ok) {
                    return response.json();
                }
                throw new Error('Network response was not ok');
            })
                .then((data) => {
                    swal({
                        title: "Order Placed Successfully!",
                        text: `Your order has been placed successfully! Your order id is ${data.orderId}`,
                        icon: "success",
                        button: "Okay",
                    })
                        .then(() => {
                            window.location.href = `/myOrder/${userId}`;
                        });
                    setTimeout(() => {
                        window.location.href = `/myOrder/${userId}`;
                    }, 3000);
                })
                .catch((error) => {
                    console.error(`There was a problem with the fetch operation: ${error.message}`);
                    // Show error modal
                    swal({
                        title: "Error",
                        text: "There was an error placing your order. Please try again later.",
                        icon: "error",
                        button: "Okay",
                    });
                });
        }


        function applyCoupon(userId) {
            const couponName = document.getElementById('couponName').value;
            const couponMessage = document.getElementById('couponMessage');
            const url = window.location.origin;
            console.log(url);
            fetch(`${url}/applyCoupon`, {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    couponName,
                    userId
                })
            }).then((response) => {
                if (response.status === 200) {
                    return response.json().then((data) => {
                        couponApply = true
                        const discountTotal = parseInt(data.discountTotal)
                        const discountAmount = parseInt(data.discountAmount)
                        couponMessage.innerHTML =
                            `<div class="alert alert-success alert-dismissible fade show" role="alert">
                            <strong>${data.message}</strong>
                            <button type="button" onclick="deleteCoupon()" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`

                        if(data.shipping){
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ 40"
                        }else{
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ Free"
                        }

                        document.getElementById('totalAmount').innerText = discountTotal
                        document.getElementById('discount').innerHTML =
                            `<div id="discountAmount"><span id="discountText" class="text-success">
                                   Discount : ₹ ${discountAmount}
                                </span>
                                <hr>
                            </div>`
                    })
                } else if (response.status === 400) {
                    return response.json().then((data) => {
                        couponApply = false
                        couponMessage.innerHTML =
                            `<div class="alert alert-warning alert-dismissible fade show" role="alert">
                            <strong>${data.message}</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`

                        setTimeout(() => {
                            couponMessage.innerHTML = `<div></div>`
                        }, 5000);

                        if(data.shipping){
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ 40"
                        }else{
                            document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ Free"
                        }
                        document.getElementById('totalAmount').innerText = data.totalAmount
                        document.getElementById('discountAmount').style.display = "none"


                    })
                }
            })
        }


        function deleteCoupon(){
            const couponName = document.getElementById('couponName').value;
            const couponMessage = document.getElementById('couponMessage');
            const url = window.location.origin;
            console.log(url);
            fetch(`${url}/deleteCoupon`, {
                method: 'DELETE',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    couponName,
                })
            }).then((response) => response.json())
            .then((data)=>{
                couponApply = false
                couponMessage.innerHTML =
                        `<div class="alert alert-warning alert-dismissible fade show" role="alert">
                            <strong>${data.message}</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>`

                setTimeout(() => {
                    couponMessage.innerHTML = `<div></div>`
                }, 3000);

                if(data.shipping){
                    document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ 40"
                }else{
                    document.getElementById('shippingFee').innerText = "Shipping Fee : ₹ Free"
                }
                document.getElementById('totalAmount').innerText = data.totalAmount
                document.getElementById('discountAmount').style.display = "none"
            
                document.getElementById('couponInputBox').innerHTML=
                                        `<input type="text" id="couponName" class="form-control text-uppercase rounded"
                                            placeholder="Coupon name" aria-label="Recipient's username"
                                            aria-describedby="basic-addon2">
                                        <div class="input-group-append">
                                            <button class="btn btn-warning" type="button"
                                            onclick="applyCoupon('${userId}')">Apply</button>
                                        </div>`
            })
        }

    </script>




    <script type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ===============================================-->
    <!--    Nav JavaScripts-->
    <!-- ===============================================-->
    <script src="../nav/js/vendor/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
        integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>
    <script src="../nav/js/vendor/bootstrap.min.js"></script>
    <script src="../nav/js/jquery.ajaxchimp.min.js"></script>
    <script src="../nav/js/jquery.nice-select.min.js"></script>
    <script src="../nav/js/jquery.sticky.js"></script>
    <script src="../nav/js/nouislider.min.js"></script>
    <script src="../nav/js/countdown.js"></script>
    <script src="../nav/js/jquery.magnific-popup.min.js"></script>
    <script src="../nav/js/owl.carousel.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
    <script src="../nav/js/gmaps.min.js"></script>
    <script src="../nav/js/main.js"></script>
    <script type="text/javascript">
    </script>
    <!-- ===============================================-->
    <!--    Book details JavaScripts -->
    <!-- ===============================================-->
    <!-- <script src="../bookdetails/vendor/jquery/jquery-3.2.1.min.js"></script> -->
    <script src="../bookdetails/vendor/animsition/js/animsition.min.js"></script>
    <script src="../bookdetails/vendor/bootstrap/js/popper.js"></script>
    <script src="../bookdetails/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="../bookdetails/vendor/select2/select2.min.js"></script>
    <script>
        $(".js-select2").each(function () {
            $(this).select2({
                minimumResultsForSearch: 20,
                dropdownParent: $(this).next('.dropDownSelect2')
            });
        })
    </script>
    <script src="../bookdetails/vendor/daterangepicker/moment.min.js"></script>
    <script src="../bookdetails/vendor/daterangepicker/daterangepicker.js"></script>
    <script src="../bookdetails/vendor/slick/slick.min.js"></script>
    <script src="../bookdetails/js/slick-custom.js"></script>
    <script src="../bookdetails/vendor/parallax100/parallax100.js"></script>
    <script>
        $('.parallax100').parallax100();
    </script>
    <script src="../bookdetails/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
    <script>
        $('.gallery-lb').each(function () { // the containers for all your galleries
            $(this).magnificPopup({
                delegate: 'a', // the selector for gallery item
                type: 'image',
                gallery: {
                    enabled: true
                },
                mainClass: 'mfp-fade'
            });
        });
    </script>
    <script src="../bookdetails/vendor/isotope/isotope.pkgd.min.js"></script>
    <script src="../bookdetails/vendor/sweetalert/sweetalert.min.js"></script>
    <script>
        $('.js-addwish-b2, .js-addwish-detail').on('click', function (e) {
            e.preventDefault();
        });
        $('.js-addwish-b2').each(function () {
            var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
            $(this).on('click', function () {
                swal(nameProduct, "is added to wishlist !", "success");
                $(this).addClass('js-addedwish-b2');
                $(this).off('click');
            });
        });
        $('.js-addwish-detail').each(function () {
            var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();
            $(this).on('click', function () {
                swal(nameProduct, "is added to wishlist !", "success");
                $(this).addClass('js-addedwish-detail');
                $(this).off('click');
            });
        });
        /*---------------------------------------------*/
        $('.js-addcart-detail').each(function () {
            var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();
            $(this).on('click', function () {
                swal(nameProduct, "is added to cart !", "success");
            });
        });
    </script>
    <script src="../bookdetails/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script>
        $('.js-pscroll').each(function () {
            $(this).css('position', 'relative');
            $(this).css('overflow', 'hidden');
            var ps = new PerfectScrollbar(this, {
                wheelSpeed: 1,
                scrollingThreshold: 1000,
                wheelPropagation: false,
            });
            $(window).on('resize', function () {
                ps.update();
            })
        });
    </script>
    <script src="../bookdetails/js/main.js"></script>
</body>

</html>