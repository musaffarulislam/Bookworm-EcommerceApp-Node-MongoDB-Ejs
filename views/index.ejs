<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Bookworm | <%= title %> | Buy Malayalam & English Books in Kannur</title>

    <link rel="apple-touch-icon" sizes="180x180" href="template/assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="template/assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="template/assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="template/assets/img/favicons/favicon-32x32.png">
    <link rel="manifest" href="template/assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="template/assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">


    <link href="template/assets/css/theme.css" rel="stylesheet" />

    
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css" integrity="sha512-CruCP+TD3yXzlvvijET8wV5WxxEh5H8P4cmz0RFbKK6FlZ2sYl3AEsKlLPHbniXKSrDdFewhbmBK5skbdsASbQ==" crossorigin="anonymous" />
    <link href="card/css/font-awesome.min.css" rel="stylesheet" />
    <link href="card/css/style.css" rel="stylesheet" />
    <link href="card/css/responsive.css" rel="stylesheet" />

    <link rel="stylesheet" href="nav/css/linearicons.css">
    <link rel="stylesheet" href="nav/css/font-awesome.min.css">
    <link rel="stylesheet" href="nav/css/themify-icons.css">
    <link rel="stylesheet" href="nav/css/owl.carousel.css">
    <link rel="stylesheet" href="nav/css/nice-select.css">
    <link rel="stylesheet" href="nav/css/nouislider.min.css">
    <link rel="stylesheet" href="nav/css/ion.rangeSlider.css" />
    <link rel="stylesheet" href="nav/css/ion.rangeSlider.skinFlat.css" />
    <link rel="stylesheet" href="nav/css/magnific-popup.css">
    <link rel="stylesheet" href="nav/css/main.css">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/css/materialdesignicons.min.css" integrity="sha384-5z5X9NljNv5ufg/tN/ztKjxL5837vqoZMIzfyLtygoRczjKm55Bvfkg2QrO/rG" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@mdi/font@5.x/js/materialdesignicons.min.js" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"></script>

  </style>
  </head>


  <body>
    

    <main class="main" id="top">


      <header class="header_area sticky-header">
        <div class="main_menu" style="background-color: #ffb30e;">
          <nav class="navbar navbar-expand-lg navbar-light main_box">
            <div class="container">
              <a class="navbar-brand logo_h" href="/"><img class="" src="nav/img/logo3.png" alt="Bookworm logo" style="width:160px"></a>
              <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <div class="collapse navbar-collapse offset justify-content-end" id="navbarSupportedContent">
                <ul class="nav navbar-nav menu_nav ml-auto">
                  <li class="nav-item active"><a class="nav-link" href="/">Home</a></li>
                  <li class="nav-item"><a class="nav-link" href="/book">Book</a></li>
                  <% if (userDetails) { %>
                    <li class="nav-item cartText"><a class="nav-link" href="/cart/<%= userDetails._id %>">Cart</a></li>
                    <li class="nav-item cartIcon"><a class="nav-link" href="/cart/<%= userDetails._id %>"><i class="fas fa-shopping-cart"></i>
                  <% }else{ %>
                    <li class="nav-item cartText"><a id="cartIdText" class="nav-link">Cart</a></li>
                    <li class="nav-item cartIcon"><a id="cartIdIcon" class="nav-link"><i class="fas fa-shopping-cart"></i></a></li>
                    <script>
                      document.getElementById("cartIdText").addEventListener("click", function() {
                        Swal.fire({
                          title: 'Not Login',
                          text: "Please Login First",
                          icon: 'error',
                          showCancelButton: true,
                          confirmButtonColor: '#3085d6',
                          cancelButtonColor: '#d33',
                          confirmButtonText: 'Log In'
                        }).then((result) => {
                          if (result.value) {
                            $('#exampleModalCenter').modal('show');
                          }
                        })
                      })
                      document.getElementById("close-modal").addEventListener("click", function() {
                        $('#exampleModalCenter').modal('hide');
                      });
                    </script>
                    <script>
                      document.getElementById("cartIdIcon").addEventListener("click", function() {
                        Swal.fire({
                          title: 'Not Login',
                          text: "Please Login First",
                          icon: 'error',
                          showCancelButton: true,
                          confirmButtonColor: '#3085d6',
                          cancelButtonColor: '#d33',
                          confirmButtonText: 'Log In'
                        }).then((result) => {
                          if (result.value) {
                            $('#exampleModalCenter').modal('show');
                          }
                        })
                      })
                      document.getElementById("close-modal").addEventListener("click", function() {
                        $('#exampleModalCenter').modal('hide');
                      });
                    </script>
                  <% } %>
                  <% if(userDetails) {%>
                    <li class="nav-item submenu dropdown">
                      <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
                       aria-expanded="false"><i class="fas fa-user-circle me-2"></i></a>
                      <ul class="dropdown-menu">
                        <li class="nav-item"><a class="nav-link" href="/myProfile/<%= userDetails._id %>"><%= userDetails.username %></a></li>
                        <li class="nav-item"><a class="nav-link" href="/myOrder/<%= userDetails._id %>">My Orders</a></li>
                        <li class="nav-item"><a class="nav-link" href="/logout">Log Out</a></li>
                      </ul>
                    </li>
                  <% }else{ %>
                    <li class="nav-item"><a class="nav-link" data-toggle="modal" data-target="#exampleModalCenter">Log In</a></li>	
                  <% } %>  
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </header>
      

      <% if(warning) {%>
     <script>
      window.addEventListener("load", ()=>{
        Swal.fire({
          title: 'Warning',
          text: "<%= warning %>",
          icon: 'warning',
          buttons: true,
          dangerMode: true,
          buttons: 'cancel'
        }).then((result) => {
          if (result) {
            $('#exampleModalCenter').modal('show');
          }
        })
      })
     </script>
      <% } %>

      <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">

            <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Log In</h5>
            <button type="button" class="close border-0 bg-white" id="close-modal" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>

            <div class="modal-body">
              
                <form id="login" onsubmit="return submitform(event)">
                    <div id="alert"></div>
                    <div class="form-outline mb-1">
                      <label class="form-label" for="typeUsernameX-1">Email</label>
                        <input type="text" id="email" class="form-control form-control-lg" name="email" />  
                    </div>
                    <div class="form-outline mb-3">
                      <label class="form-label" for="typePasswordX-1">Password</label>
                    <input type="password" id="password" name="password" class="form-control form-control-lg" />
                    </div>
                    <div class="d-flex justify-content-center">
                      <button class="btn btn-primary btn-lg btn-block" type="button"  style="justify-content: center;" onclick="login()">Log In</button>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer d-flex justify-content-center">
              <div>
                <p class="mb-0">Don't have an account? <a class="fw-bold text-dark" href="/signup">Sign Up</a></p>
              </div>
              
            </div>
        </div>
        </div>
      </div> 
      
      <section class="py-5 overflow-hidden bg-primary" id="home">
        <div class="container">
          <div class="row flex-center">
            <div class="col-md-5 col-lg-6 order-0 order-md-1 mt-8 mt-md-0"><a class="img-landing-banner" href="#!"><img class="img-fluid" src="template/assets/img/gallery/hero-header-2.png" alt="hero-header" /></a></div>
            <div class="col-md-7 col-lg-6 py-8 text-md-start text-center">
              <h1 class="display-1 fs-md-5 fs-lg-6 fs-xl-8 text-light">
                <% if(banners) { %>
                <%= banners.mainHeading %></h1>
                <% }else{ %>
                  Let's Start Reading
                <% } %>
              <h1 class="text-800 mb-5 fs-4">
                <% if(banners) { %>
                  <%= banners.subHeading1 %>
                  <% }else{ %>
                    You can Reach a new world through reading,
                  <% } %>
                 <br class="d-none d-xxl-block" /> 
                 <% if(banners) { %>         
                  <%= banners.subHeading2 %>
                  <% }else{ %>
                    Books await You
                  <% } %>
              </h1>
              <div class="card w-xxl-75">
                <div class="card-body">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <button class="nav-link active mb-3" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true"><i class="fas fa-book me-2"></i>Book</button>
                      <button class="nav-link mb-3" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false"><i class="fas fa-user me-2"></i>Author</button>
                    </div>
                  </nav>
                  <div class="tab-content mt-3" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                      <form class="row gx-2 gy-2 align-items-center">
                        <div class="col">
                          <div class="input-group-icon"><i class="fas fa-search text-danger input-box-icon"></i>
                            <label class="visually-hidden" for="searchBook">Book</label>
                            <input class="form-control input-box form-foodwagon-control" id="searchBook" type="text" placeholder="Enter Book Name" onkeyup="searchBookInput()" >
                          </div>
                        </div>
                        
                      </form>
                    </div>
                    <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                      <form class="row gx-4 gy-2 align-items-center">
                        <div class="col">
                          <div class="input-group-icon"><i class="fas fa-search text-danger input-box-icon"></i>
                            <label class="visually-hidden" for="searchAuthor">Author</label>
                            <input class="form-control input-box form-foodwagon-control" id="searchAuthor" type="text" placeholder="Enter Author Name" onkeyup="searchAuthorInput()" />
                          </div>
                        </div>
                        
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section> 
      <section class="py-0 bg-primary-gradient">

        <div class="container">
          <div class="row justify-content-center g-0">
            <div class="col-xl-9">
              <div class="col-lg-6 text-center mx-auto mb-3 mb-md-5 mt-4">
                <h5 class="fw-bold text-danger fs-3 fs-lg-5 lh-sm my-6">How does it work</h5>
              </div>
              <div class="row">
                <div class="col-sm-12 col-md-4 mb-6">
                  <div class="text-center"><img class="shadow-icon" src="template/assets/img/gallery/location.png" height="112" alt="..." />
                    <h5 class="mt-4 fw-bold">Select location</h5>
                    <p class="mb-md-0">Choose the location where your book will be delivered.</p>
                  </div>
                </div>
                <div class="col-sm-12 col-md-4 mb-6">
                  <div class="text-center"><img class="shadow-icon" src="template/assets/img/gallery/pay.png" height="112" alt="..." />
                    <h5 class="mt-4 fw-bold">Pay advanced</h5>
                    <p class="mb-md-0">It's quick, safe, and simple. Select several methods of payment</p>
                  </div>
                </div>
                <div class="col-sm-12 col-md-4 mb-6">
                  <div class="text-center"><img class="shadow-icon" src="template/assets/img/gallery/meals.png" height="112" alt="..." />
                    <h5 class="mt-4 fw-bold">Enjoy meals</h5>
                    <p class="mb-md-0">Book is delivered directly to your home.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </section>


      
    </main>
    
    
    
    <script>
     function login() {
        const loginEmail = document.getElementById('email').value;
        const loginEmailPassword = document.getElementById('password').value;
        const url = window.location.origin;
        fetch(`${url}/login`, {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            email : loginEmail,
            password : loginEmailPassword,
          })
        }).then((response)=> {
          if(response.status === 200){
            return response.json().then(() => {
                location.reload();
            });
          }else if(response.status === 401){
            return response.json().then((data) => {
                Swal.fire({
                  title: 'Warning',
                  text: data.message,
                  icon: 'warning',
                  buttons: true,
                  dangerMode: true,
                  buttons: 'cancel'
                });
            });
          }
        })
      }
      
      function addCart(bookId, userId) {
        const url = window.location.origin;
        fetch(`${url}/addToCart?productId=${bookId}&userId=${userId}`, {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          }
        })
      }
    </script>

    <script>
      function searchBookInput() {
        const searchBox = document.getElementById('searchBook').value.toUpperCase();
        const bookList = document.getElementById('bookList');
        const books = document.getElementsByClassName('books');
        const bname = bookList.getElementsByTagName('h5');

        for (let i = 0; i < bname.length; i++) {
          let match = bname[i];
          if (match) {
            let textValue = match.innerHTML.toUpperCase();
            if (textValue.indexOf(searchBox) > -1) {
              books[i].style.display = '';
            } else {
              books[i].style.display = 'none';
            }
          }
        }
      }
    </script>


    <script>
      function searchAuthorInput() {
        const searchBox = document.getElementById('searchAuthor').value.toUpperCase();
        const bookList = document.getElementById('bookList');
        const books = document.getElementsByClassName('books');
        const aname = bookList.getElementsByClassName('authorName');

        for (let i = 0; i < aname.length; i++) {
          let match = aname[i];
          if (match) {
            let textValue = match.innerHTML.toUpperCase();
            if (textValue.indexOf(searchBox) > -1) {
              books[i].style.display = '';
            } else {
              books[i].style.display = 'none';
            }
          }
        }
      }
    </script>





    <script src="template/vendors/@popperjs/popper.min.js"></script>
    <script src="template/vendors/bootstrap/bootstrap.min.js"></script>
    <script src="template/vendors/is/is.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="template/vendors/fontawesome/all.min.js"></script>
    <script src="template/assets/js/theme.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200;300;400;600;700;900&amp;display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="card/js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <script src="card/js/custom.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap"></script> 
    <script src="nav/js/vendor/jquery-2.2.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
    crossorigin="anonymous"></script>
    <script src="nav/js/vendor/bootstrap.min.js"></script>
    <script src="nav/js/jquery.ajaxchimp.min.js"></script>
    <script src="nav/js/jquery.nice-select.min.js"></script>
    <script src="nav/js/jquery.sticky.js"></script>
    <script src="nav/js/nouislider.min.js"></script>
    <script src="nav/js/countdown.js"></script>
    <script src="nav/js/jquery.magnific-popup.min.js"></script>
    <script src="nav/js/owl.carousel.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjCGmQ0Uq4exrzdcL6rvxywDDOvfAu6eE"></script>
    <script src="nav/js/gmaps.min.js"></script>
    <script src="nav/js/main.js"></script> 
    <script src="/javascripts/loginvalidation.js"></script>
    <script>
    $(document).ready(function(){
      $('#myModal').modal('show');
      $('#closeBtn').click(function(){
        $('#myModal').modal('hide');
       });
      });
    </script>
    <script>
        const filterButtons = document.querySelectorAll(".filter-button");
        filterButtons.forEach(button => {
          button.addEventListener("click", function() {
            const filter = this.getAttribute("data-filter");
            const items = document.querySelectorAll(".item"); 
            filterButtons.forEach(button => button.classList.remove("active")); 
            this.classList.add("active");
            if (filter === "all") {
              items.forEach(item => (item.style.display = "block"));
            } else {
              items.forEach(item => {
                if (!item.classList.contains(filter)) {
                  item.style.display = "none";
                } else {
                  item.style.display = "block";
                }
              }); 
            }
          });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script> 
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  </body>
</html>